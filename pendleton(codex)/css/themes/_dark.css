/* ============================================
   THEMES: DARK
   Auto-applies via prefers-color-scheme,
   or manually via [data-theme="dark"]
   ============================================ */

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --clr-bg:          #0D1117;
    --clr-bg-alt:      #131920;
    --clr-surface:     #1A222C;
    --clr-surface-alt: #1F2A38;
    --clr-text:        #E8E4DC;
    --clr-text-muted:  #6B7380;
    --clr-text-inv:    #0D1117;
    --clr-border:      #243040;
    --clr-shadow:      rgba(0, 0, 0, 0.4);
  }
}

[data-theme="dark"] {
  --clr-bg:          #0D1117;
  --clr-bg-alt:      #131920;
  --clr-surface:     #1A222C;
  --clr-surface-alt: #1F2A38;
  --clr-text:        #E8E4DC;
  --clr-text-muted:  #6B7380;
  --clr-text-inv:    #0D1117;
  --clr-border:      #243040;
  --clr-shadow:      rgba(0, 0, 0, 0.4);
}

/* Dark mode component tweaks */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) .card { background: var(--clr-surface); }
  :root:not([data-theme="light"]) .filter-group select,
  :root:not([data-theme="light"]) .filter-group input,
  :root:not([data-theme="light"]) .form-input,
  :root:not([data-theme="light"]) .form-select,
  :root:not([data-theme="light"]) .form-textarea {
    background: var(--clr-surface);
    border-color: var(--clr-border);
  }
}

[data-theme="dark"] .card { background: var(--clr-surface); }

[data-theme="dark"] .filter-group select,
[data-theme="dark"] .filter-group input,
[data-theme="dark"] .form-input,
[data-theme="dark"] .form-select,
[data-theme="dark"] .form-textarea {
  background: var(--clr-surface);
  border-color: var(--clr-border);
}

[data-theme="dark"] .home-services__item,
[data-theme="dark"] .portal-hero {
  /* Already dark primary background */
}

[data-theme="dark"] .subnav { background: #0a0f14; }

[data-theme="dark"] .advantage__step:hover,
[data-theme="dark"] .advantage__step.active {
  background: rgba(75, 172, 198, 0.05);
}

[data-theme="dark"] .us-map .state { fill: #243040; }
[data-theme="dark"] .us-map .state:hover { fill: #3a8fa8; }

/* Theme toggle button (in navbar) */
.theme-toggle {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  color: rgba(255,255,255,0.7);
  transition: all var(--dur-base) var(--ease-out);
  margin-left: var(--sp-2);
}

.navbar.nav-active .theme-toggle,
.navbar:hover .theme-toggle {
  color: var(--clr-primary);
}

[data-theme="dark"] .navbar.nav-active .theme-toggle,
[data-theme="dark"] .navbar:hover .theme-toggle {
  color: var(--clr-white);
}

.theme-toggle:hover {
  background: rgba(75, 172, 198, 0.15);
  color: var(--clr-accent) !important;
}

.theme-toggle .icon-sun { display: none; }
.theme-toggle .icon-moon { display: block; }

[data-theme="dark"] .theme-toggle .icon-sun { display: block; }
[data-theme="dark"] .theme-toggle .icon-moon { display: none; }
